<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Homework CNIT 133M</title>
<meta name="description" content="CNIT 133M Online Semester Schedule - Fall 2018">
    <link rel="stylesheet" type="text/css" href="style3.css" />
      <script src="https://d3js.org/d3.v4.min.js"></script>
    </head>

  <body>
    <script>
        
        var margin = 200;
        var height = 500 - margin, width = 700 - margin;

        var x = d3.scaleBand().range([0,width]).padding(0.4);
        var y = d3.scaleLinear().range([0,height]);
        
        var tooltip = d3.select("body").append("div")
                        .style("position","absolute")
                        .style("padding","0 10px")
                        .style("background", "black")
                        .style("opacity", 0);

        var svg = d3.select('#chart')
                      .append("svg")
                      .attr("width", width + margin)
                      .attr("height",height + margin)
                      .append("g")
                      .attr("transform","translate(100,100)");

        d3.json("hw3data.json", function(data){
          x.domain(data.map(function(d){ return d.term; }));
          y.domain([d3.max(data, function(d){ return d.students;}), 0]);
        
        svg.append("g")
          .attr("transform","translate(0,0)")
          .call(d3.axisLeft(y))
          .append("text")
          .attr("transform", "translate(-40,100),rotate(-90)")
          .attr("font-size", "3em")
          .text("Number of Students");

        svg.append("g")
          .attr("transform","translate(20," + height + ")")
          .call(d3.axisBottom(x))
          .append("text")
          .attr("y", height - 250)
          .attr("x", width - 250)
          .attr("text-anchor", "end")
          .text("Terms");

        svg.selectAll(".bar")
          .data(data)
          .enter()
          .append("rect")
          .attr("class", "bar")
          .on("mouseover",onMouseOver)
          .on("mouseout",onMouseOut)
          .attr("x", function(d) { return x(d.term); })
          .attr("y", function(d) { return y(d.students);})
          .attr("width", x.bandwidth())
          .attr("height", function(d) {return height - y(d.students);});

        });

        function onMouseOver(d){
          tooltip.transition().style("opacity",1)
          tooltip.html(d["term"] + "<br>" +  d["students"] + " students")
                  .style("left", (d3.event.pageX - 30) + "px")
                  .style("top", (d3.event.pageY - 30) + "px")
          d3.select(this).style("opacity",0.5)
        }

        function onMouseOut(d){
          d3.select(this).style("opacity",1)
        }

      </script>

       <div class="footer"> 
     <p>
       <a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fkatyaraukach.github.io%2Findex.html">
       <img style="border:0;width:100px;height:45px" src="http://web.csulb.edu/~amanabat/img/w3clogo.png"
       alt="HTML5"></a> 
    </p>
     <p>
    <a href="https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fkatyaraukach.github.io%2Fstyle1.css&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en">
    <img style="border:0;width:88px;height:31px" src="http://jigsaw.w3.org/css-validator/images/vcss-blue" alt="Valid CSS!" />
</a>
</p>
<script>
var dateModified = document.lastModified;
mydate = dateModified.slice(0,16);
document.write("Last updated: " + mydate);
</script>
</div>
  </body>

</html>