
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="D3 homework">
<title>D3 Homework</title>
<style>
#chart {
    width: 600px;
    margin: 0 auto;
    text-align: center;
}
#chart rect{
  fill: #fff;
}

#chart text{
  fill: #3A6B4B;
}

.axis text{
  font: 10px 'Verdana';
}

.axis path, .axis line{
  fill: none;
  stroke : #3A6B4B;
  shape-rendering: crispEdges;
}

h1 {
    font: 20px 'Georgia';
    color: #3A6B4B;
}

body{
  background: #ddd;
  color : #333;
  padding : 10px;
  font: 10px 'Verdana';
}
</style>
<script src="https://d3js.org/d3.v4.min.js"></script>

<script>
    d3.json("hw3data.json", function(data){
        var maxStudents = 0;
        var minStudents = Infinity;
        // format {term: "Spring 16", students: 160}
        for (var i = 0; i < data.length; i++) {
            if (data[i].students > maxStudents) {
                maxStudents = data[i].students;
            }
            if (data[i].students < minStudents) {
                minStudents = data[i].students;
            }
        }
        
        var margin = { top: 20, right: 20, bottom: 30, left: 40};
        var height = 400 - margin.top - margin.bottom;
        var width = 600 - margin.left - margin.right;
        var mycolors = d3.scaleLinear()
            .domain([minStudents, maxStudents])
            .range(['#D6728B', '#72D695']);

        var verticalGuide = d3.scaleLinear()
            .domain([0, maxStudents])
            .range([height, 0]);
        var yS = d3.scaleLinear()
            .domain([0, maxStudents])
            .range([0, height]);
        var xS = d3.scaleBand()
            .domain(data.map(function(d) { return d.term; }))
            .range([0, width])
            .padding(0.1);

        var tooltip = d3.select('body')
            .append('div')
            .style('position', 'absolute')
            .style('padding', '5px 10px')
            .style('background', 'white')
            .style('opacity', 0)
            .style('text-align', 'center')
            .style('border-radius', '10px')
            .style('border', '1px solid #ddd');

        var graph = d3.select('#chart')
                .append('svg')
                .attr('width', width + margin.left + margin.right)
                .attr('height', height + margin.top + margin.bottom)
                .style('background', '#eee')
                .append('g')
                .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');
        graph.selectAll('rect')
            .data(data)
            .enter()
            .append('rect')
            .style('fill', function(d) { return mycolors(d.students)})
            .attr('width', xS.bandwidth)
            .attr('height', function(d) { return yS(d.students); })
            .attr('x', function(d, i) { return xS(d.term); })
            .attr('y', function(d) { return height - yS(d.students); })
            .on('mouseenter', function(d) {
                tooltip.transition()
                  .style('opacity', .8)
                tooltip.html(`Term - Students<br>${d.term} - ${d.students}`)
                    .style('left', (d3.event.pageX - 50) + 'px')
                    .style('top', (d3.event.pageY - 70) + 'px');
                d3.select(this)
                .style('opacity', .6);
            })
            .on('mouseleave', function(d) {
                d3.select(this)
                .style('opacity', 1);
            });

        graph.append('g')
            .attr("class", "axis")
            .call(d3.axisLeft(yS).scale(verticalGuide))

        graph.append('g')
            .attr("class", "axis")
            .call(d3.axisBottom(xS))
            .attr('transform', 'translate(0, ' + height + ')');

    });
</script>
</head>

<body>
<div id="chart">
    <h1>Number Of Students Per Term</h1>
</div> 
</body>