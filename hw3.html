<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Homework CNIT 133M</title>
<meta name="description" content="CNIT 133M Online Semester Schedule - Fall 2018">
     <style>
    #chart rect {
      fill: #4aaeea;
    }

    #chart text {
      fill: white;
      font: 10px sans-serif;
      text-anchor: end;
    }

    .axis text {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #fff;
      shape-rendering: crispEdges;
    }

    body {
      background: #cccccc;
      color: #eaeaea;
      padding: 10px;
    }
  </style>
    </head>

  <body>
    <div id="chart"></div>
    <script>
    
d3.json("hw3.json", function (error, data) {
    if (error) throw error;

    data.forEach(function (d) {
        d.term = d.term;
        d.students = +d.students;

    });


    var margin = { top: 20, right: 20, bottom: 30, left: 40 };

    var height = 250 - margin.top - margin.bottom,
        width = 500 - margin.left - margin.right;

    var graph = d3.select('#chart')
        .append('svg')
        .attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')')

    var yS = d3.scaleLinear()
        .domain([0, d3.max(data, function (d) { return d.students; })])
        .range([height, 0]);

    var xS = d3.scaleBand()
        .domain(data.map(function (d) { return d.term; }))
        .range([0, width])
        .padding(0.1);

    var verticleGuide = d3.scaleLinear()
        .domain([0, d3.max(data, function (d) { return d.students; })])
        .range([height, 0]);

    var tooltip = d3.select('body').append('div')
        .style('position', 'absolute')
        .style('padding', '0 10px')
        .style('background', 'white')
        .style('opacity', 0);

    graph.selectAll('rect')
        .data(data)
        .enter()
        .append('rect')
        .attr('width', xS.bandwidth)
        .attr('height', function (d) { return height - yS(d.students); })
        .attr('x', function (d) { return xS(d.term); })
        .attr('y', function (d) { return yS(d.students); })
        .on('mouseover', function (d) {
            tooltip.transition()
                .style('opacity', 8)
                .style('color', 'black')
            tooltip.html('Term - Students <br>' + d.term + ' - ' + d.students)
                .style('left', (d3.event.pageX - 50) + 'px')
                .style('top', (d3.event.pageY - 45) + 'px')
            d3.select(this)
                .style('opacity', 0.4)
        });
    
    graph.append('g')
        .call(d3.axisLeft(yS).scale(verticleGuide))
        .attr('class', 'axis');

    graph.append('g')
        .call(d3.axisBottom(xS))
        .attr('transform', 'translate(0, ' + height + ')')
        .attr('class', 'axis');

});

      </script>
      
       <script src="https://d3js.org/d3.v4.min.js"></script>

       <div class="footer"> 
     <p>
       <a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fkatyaraukach.github.io%2Findex.html">
       <img style="border:0;width:100px;height:45px" src="https://web.csulb.edu/~amanabat/img/w3clogo.png"
       alt="HTML5"></a> 
    </p>
     <p>
    <a href="https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fkatyaraukach.github.io%2Fstyle1.css&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en">
    <img style="border:0;width:88px;height:31px" src="https://jigsaw.w3.org/css-validator/images/vcss-blue" alt="Valid CSS!" />
</a>
</p>
<script>
var dateModified = document.lastModified;
mydate = dateModified.slice(0,16);
document.write("Last updated: " + mydate);
</script>
</div>
  </body>

</html>